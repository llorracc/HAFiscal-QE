# Step-by-Step Replication Guide for do_all.py

This document provides detailed information for step-by-step replication of computational results using the `do_all.py` script.

---

## Overview

Given the time it takes to replicate all the computational results in the paper, it could be useful to do them step-by-step. To do so, navigate to the directory `Code/HA-Models` and set the appropriate flags in the file `do_all.py` for the steps to be executed. Then execute the command:

```bash
python do_all.py
```

**NOTE**: Our code using optimization routines should be deterministic. However, small differences in environments may lead to numerical differences in the results obtained. Such differences in steps 1 and 2 will lead to numerical differences in the results obtained in later steps as well.

---

## List of Tables

### Table 1
**Created in:**

- File: `Code/HA-Models/Target_AggMPCX_LiquWealth/Estimation_BetaNablaSplurge.py`
- Line: 680
- Output: `Code/HA-Models/Target_AggMPCX_LiquWealth/images/MPC_WealthQuartiles_Table.tex`

### Table 2, Panel A
**Not generated in code** - summarizes parameters mentioned in the text

- Parameters used in file: `Code/HA-Models/FromPandemicCode/EstimParameters.py`
- Exception: $\kappa$ = ADelasticity is used in file: `Code/HA-Models/FromPandemicCode/Parameters.py`

### Table 2, Panel B
**Lines 1-3:**

- Generated by: `Code/Empirical/make_liquid_wealth.py`

**Lines 3-6:**

- Not generated in code, summarizes parameters mentioned in the text
- Parameters used in file: `Code/HA-Models/FromPandemicCode/EstimParameters.py`

### Table 3, All Panels
**Not generated in code** - summarizes parameters mentioned in the text

- Parameters used in file: `Code/HA-Models/FromPandemicCode/Parameters.py`

### Master Results File
**File**: `Code/HA-Models/Results/AllResults_CRRA_2.0_R_1.01.txt`

- Written by: `Code/HA-Models/FromPandemicCode/EstimAggFiscalMAIN.py`
- Lines: 1105 and 1111

### Table 4, Panel A
**Numbers from**: `Code/HA-Models/Results/AllResults_CRRA_2.0_R_1.01.txt`

- Lines: 4 and 10; 14 and 20; 24 and 30

### Table 4, Panel B
**Line 1:**

- Generated by: `Code/Empirical/make_liquid_wealth.py`

**Line 2:**

- From file: `Code/HA-Models/Results/AllResults_CRRA_2.0_R_1.01.txt`
- Lines: 5, 15 and 25

### Table 5, Panel A
**Line 1:**

- Generated by: `Code/Empirical/make_liquid_wealth.py`

**Line 2:**

- From file: `Code/HA-Models/Results/AllResults_CRRA_2.0_R_1.01.txt`
- Line: 37

**Line 3:**

- From file: `Code/HA-Models/Results/AllResults_CRRA_2.0_R_1.01.txt`
- Line: 45

### Table 5, Panel B
**Line 1:**

- Generated by: `Code/Empirical/make_liquid_wealth.py`

**Line 2:**

- From file: `Code/HA-Models/Results/AllResults_CRRA_2.0_R_1.01.txt`
- Line: 38

**Line 3:**

- From file: `Code/HA-Models/Results/AllResults_CRRA_2.0_R_1.01.txt`
- Line: 44

### Table 6
**Created in:**

- File: `Code/HA-Models/FromPandemicCode/AggFiscalMAIN.py`
- Line: 56 (calling function `Code/HA-Models/FromPandemicCode/Output_Results.py`, where line 479 creates the table)
- Output: `Code/HA-Models/FromPandemicCode/Tables/CRRA2/Multiplier.tex`

### Table 7
**Created in:**

- File: `Code/HA-Models/FromPandemicCode/AggFiscalMAIN.py`
- Line: 56 (calling function `Code/HA-Models/FromPandemicCode/Output_Results.py`, which calls `Code/HA-Models/FromPandemicCode/Welfare.py`, where line 293 creates the table)
- Output: `Code/HA-Models/FromPandemicCode/Tables/CRRA2/welfare6.tex`

### Table 8
**Created in:**

- File: `Code/HA-Models/FromPandemicCode/AggFiscalMAIN.py`
- Line: 166 (calling function `Code/HA-Models/FromPandemicCode/Output_Results.py`, which calls `Code/HA-Models/FromPandemicCode/Welfare.py`, where line 326 creates the table)
- Output: `Code/HA-Models/FromPandemicCode/Tables/Splurge0/welfare6_SplurgeComp.tex`

### Table 9
**Parametrization table** - no computational results

---

## List of Figures

### Figure 1
**Created in:**

- File: `Code/HA-Models/Target_AggMPCX_LiquWealth/Estimation_BetaNablaSplurge.py`
- Lines: 596 and 633
- Output: `Figures/splurge_estimation.pdf`

### Figure 2
**Created in:**

- File: `Code/HA-Models/FromPandemicCode/CreateLPfig.py`
- Line: 124
- Output: `Code/HA-Models/FromPandemicCode/LorenzPoints_CRRA_2.0_R_1.01.pdf`

### Figure 3(a)
**Created in:**

- File: `Code/HA-Models/FromPandemicCode/CreateMPCfig.py`
- Line: 77
- Output: `Figures/untargetedMoments.pdf`

### Figure 3(b)
**Created in:**

- File: `Code/HA-Models/FromPandemicCode/EvalConsDropUponUILeave.py`
- Line: 112
- Output: `Figures/untargetedMoments.pdf`

### Figure 4
**Created in:**

- File: `Code/HA-Models/FromPandemicCode/AggFiscalMAIN.py`
- Line: 56 (calling function `Code/HA-Models/FromPandemicCode/Output_Results.py`, where lines 108, 148, 186, 288, 295 and 301 create the six subfigures)
- Output: `Figures/Policyrelrecession.pdf`

### Figure 5
**Created in:**

- File: `Code/HA-Models/FromPandemicCode/HA-Fiscal-HANK-SAM-to-python.py`
- Lines: 1162, 1163, 1164, 1203, 1204, 1205 (for panels a, b, c, d, e, f respectively)
- Output: `Figures/HANK_IRFs.pdf`

### Figure 6
**Created in:**

- File: `Code/HA-Models/FromPandemicCode/AggFiscalMAIN.py`
- Line: 56 (calling function `Code/HA-Models/FromPandemicCode/Output_Results.py`, where line 335 creates the figure)
- Output: `Figures/HANK_multipliers.pdf`

---

## References

Board of Governors of the Federal Reserve System. 2007. Survey of Consumer Finances (SCF), 2004 Summary Extract Public Data Dataset. Washington, DC. <https://www.federalreserve.gov/econres/scf_2004.htm>
